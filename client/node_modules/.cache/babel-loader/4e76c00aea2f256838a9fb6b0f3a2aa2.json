{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/asadullah/LandProject/src/components/Profile/Data.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Button, Col, Container, Form, ListGroup, Row, Tab } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\n\nfunction Data() {\n  _s();\n\n  const [token, setToken] = useState(() => JSON.parse(localStorage.getItem(\"token\")));\n  const [pageUrl, setPageUrl] = useState(\"\");\n  const [userCnic, setUserCnic] = useState(() => localStorage.getItem(\"userCnic\"));\n  const [organization, setOrganization] = useState(() => localStorage.getItem(\"orgName\"));\n  const [properties, setProperties] = useState([]);\n  const data = {};\n  const [selectedFile, setSelectedFile] = useState({\n    selected: null\n  });\n\n  if (!token) {\n    window.location.pathname = \"/signin\";\n  }\n\n  const url = \"https://35.209.170.73:4000/channels/mychannel/chaincodes/landRecord\";\n  const url2 = url + `?args=[\"${userCnic}\"]&fcn=queryLandsByOwner`;\n  let conf = {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\"\n    }\n  };\n  useEffect(() => {\n    axios.get(url2, conf).then(response => {\n      setProperties(response.data.result);\n    });\n  }, [pageUrl]);\n\n  const singleFileChangedHandler = event => {\n    setSelectedFile({\n      selected: event.target.files[0]\n    });\n  };\n\n  function singleFileUploadHandler(event) {\n    event.preventDefault();\n    let data = new FormData();\n\n    if (selectedFile.selected) {\n      data.append(\"profileImage\", selectedFile.selected, selectedFile.selected.name);\n      axios.post(\"https://35.209.170.73:4000/profile-img-upload\", data, {\n        headers: {\n          accept: \"application/json\",\n          \"Accept-Language\": \"en-US,en;q=0.8\",\n          \"Content-Type\": `multipart/form-data; boundary=${data._boundary}`\n        }\n      }).then(response => {\n        if (200 === response.status) {\n          // If file size is larger than expected.\n          if (response.data.error) {\n            if (\"LIMIT_FILE_SIZE\" === response.data.error.code) {\n              console.log(\"LIMIT\");\n            } else {\n              // If not the given file type\n              console.log(\"Response ===> \", response.data);\n            }\n          } else {\n            // Success\n            createPropertyAsset(event, response.data.location);\n            document.getElementById(\"address\").value = \"\";\n            document.getElementById(\"type\").value = \"\";\n            document.getElementById(\"location\").value = \"\";\n            document.getElementById(\"area\").value = \"\";\n            document.getElementById(\"city\").value = \"\";\n            document.getElementById(\"country\").value = \"\";\n            document.getElementById(\"propertyImage\").value = \"\";\n          }\n        }\n      }).catch(error => {\n        console.log(\"Error ===> \", error);\n      });\n    } else {\n      // if file not selected throw error\n      alert(\"Please upload file\");\n    }\n  }\n\n  async function checkProperty(address) {\n    const url3 = `https://35.209.170.73:4000/channels/mychannel/chaincodes/landRecord?args=[\"${address}\"]&fcn=queryLand`;\n    const response = await axios.get(url3, conf);\n\n    if (response.data.error) {\n      return true;\n    }\n\n    if (response.data.result.address.search(address) !== -1) {\n      alert(\"Address already taken. type correct address\");\n      return false;\n    }\n  }\n\n  function transferOwnership(event) {\n    event.preventDefault();\n    const formData = new FormData(event.target);\n    const args = [];\n    let counter = 0;\n\n    for (let key of formData.keys()) {\n      args.push(formData.get(key));\n    }\n\n    if (properties.length === 0) {\n      alert(\"you don't have any land to transfer\");\n      return;\n    }\n\n    properties.forEach((property, index) => {\n      if (property.address === args[0]) {\n        counter = counter + 1;\n        data[\"fcn\"] = \"changeLandOwner\";\n        data[\"chaincodeName\"] = \"landRecord\";\n        data[\"channelName\"] = \"mychannel\";\n        data[\"args\"] = args;\n        axios.post(url, data, conf).then(function (response) {\n          alert(\"Successfully transfered car asset\");\n        });\n        document.getElementById(\"address\").value = \"\";\n        document.getElementById(\"ownerCnic\").value = \"\";\n        return;\n      }\n    });\n\n    if (counter === 0) {\n      alert(\"Wrong address\");\n      return;\n    }\n  }\n\n  async function createPropertyAsset(event, loc) {\n    event.preventDefault();\n    const formData = new FormData(event.target);\n    const args = [];\n\n    for (let key of formData.keys()) {\n      args.push(formData.get(key));\n    }\n\n    if (await checkProperty(args[0])) {\n      args.pop();\n      args.push(userCnic);\n      args.push(loc);\n      data[\"fcn\"] = \"createLand\";\n      data[\"chaincodeName\"] = \"landRecord\";\n      data[\"channelName\"] = \"mychannel\";\n      data[\"args\"] = args;\n      console.log(data);\n      axios.post(url, data, conf).then(alert(\"Success property asset created\")).catch(error => {\n        alert(error);\n      });\n      document.getElementById(\"address\").value = \"\";\n      document.getElementById(\"location\").value = \"\";\n      document.getElementById(\"type\").value = \"\";\n      document.getElementById(\"area\").value = \"\";\n      document.getElementById(\"city\").value = \"\";\n      document.getElementById(\"country\").value = \"\";\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"mb-5 py-5\",\n    children: /*#__PURE__*/_jsxDEV(Tab.Container, {\n      id: \"list-group-tabs-example\",\n      defaultActiveKey: \"#link1\",\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          sm: 8,\n          className: \"order-last order-sm-first py-3\",\n          children: /*#__PURE__*/_jsxDEV(Tab.Content, {\n            children: [/*#__PURE__*/_jsxDEV(Tab.Pane, {\n              eventKey: \"#link1\",\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"My Property(s)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"container\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: properties.map((property, index) => {\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-12 col-md-6 mb-4\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"card p-3 d-flex align-content-between flex-wrap\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"overflow-hidden px-1 imgThumb bg-black\",\n                          children: /*#__PURE__*/_jsxDEV(\"img\", {\n                            src: property.propertyImage,\n                            className: \"card-img-top mh-100 d-block\",\n                            alt: \"...\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 203,\n                            columnNumber: 31\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 202,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"card-body text-left\",\n                          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                            className: \"card-title text-dark font-weight-bold\",\n                            children: [property.location, property.area, \" \", property.city]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 210,\n                            columnNumber: 31\n                          }, this), /*#__PURE__*/_jsxDEV(Link, {\n                            className: \"btn bg-theme border-theme button-hover\",\n                            to: {\n                              pathname: \"/property\",\n                              data: property.address\n                            },\n                            children: \"View\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 215,\n                            columnNumber: 31\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 209,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 201,\n                        columnNumber: 27\n                      }, this)\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 200,\n                      columnNumber: 25\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tab.Pane, {\n              eventKey: \"#link2\",\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Asset Creation\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form, {\n                className: \"text-left addForm py-4 mb-3\",\n                onSubmit: singleFileUploadHandler,\n                children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"Address *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"Enter Your Address Here\",\n                    required: true,\n                    name: \"address\",\n                    id: \"address\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"Location *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"Enter Your Property Location\",\n                    required: true,\n                    name: \"location\",\n                    id: \"location\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"Type *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"Enter Your Property Type\",\n                    required: true,\n                    name: \"type\",\n                    id: \"type\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 261,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"Area *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 271,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"Enter Your Property Area in Yards\",\n                    required: true,\n                    name: \"area\",\n                    id: \"area\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 272,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"City *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 281,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"Enter City of your property\",\n                    required: true,\n                    name: \"city\",\n                    id: \"city\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 282,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 280,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"Country *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 291,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"Enter Country of Your Property\",\n                    required: true,\n                    name: \"country\",\n                    id: \"country\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 292,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"Image *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 301,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    onChange: singleFileChangedHandler,\n                    type: \"file\",\n                    id: \"propertyImage\",\n                    placeholder: \"Upload Image of Your Property\",\n                    required: true,\n                    name: \"propertyImage\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 302,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"primary\",\n                  type: \"submit\",\n                  className: \"w-100 mt-2 bg-theme border-theme button-hover\",\n                  \"data-toggle\": \"modal\",\n                  id: \"submit\",\n                  children: \"Submit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 311,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tab.Pane, {\n              eventKey: \"#link3\",\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Transfer Ownership\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form, {\n                className: \"text-left addForm py-4 mb-3\",\n                onSubmit: transferOwnership,\n                children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"Address *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 329,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    id: \"address\",\n                    placeholder: \"Enter Your Address Here\",\n                    required: true,\n                    name: \"address\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 330,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 328,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"CNIC *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 341,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    id: \"ownerCnic\",\n                    placeholder: \"Enter Owner's Cnic Without Dashes\",\n                    required: true,\n                    name: \"ownerCnic\",\n                    minLength: \"13\",\n                    maxLength: \"13\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 342,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"primary\",\n                  type: \"submit\",\n                  className: \"w-100 mt-2 bg-theme border-theme button-hover\",\n                  \"data-toggle\": \"modal\",\n                  children: \"Submit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          sm: 4,\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: [\"Hello \", userCnic, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n            children: [\"Organization:\", \" \", organization === \"Org1\" ? \"Development Authority\" : \"Land Owner\", \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n            children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              action: true,\n              href: \"#link1\",\n              onClick: () => setPageUrl(window.location.href),\n              children: \"My Property(s)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 15\n            }, this), organization === \"Org1\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                action: true,\n                href: \"#link2\",\n                children: \"Create Property Record\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                action: true,\n                href: \"#link3\",\n                children: \"Transfer Ownership\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                action: true,\n                href: \"#link3\",\n                children: \"Transfer Ownership\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 390,\n                columnNumber: 19\n              }, this)\n            }, void 0, false)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 188,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Data, \"vStouSI/FUBCk/DDZw3n9dYBU1Q=\");\n\n_c = Data;\nexport default Data;\n\nvar _c;\n\n$RefreshReg$(_c, \"Data\");","map":{"version":3,"sources":["/home/asadullah/LandProject/src/components/Profile/Data.js"],"names":["React","useState","useEffect","axios","Button","Col","Container","Form","ListGroup","Row","Tab","Link","Data","token","setToken","JSON","parse","localStorage","getItem","pageUrl","setPageUrl","userCnic","setUserCnic","organization","setOrganization","properties","setProperties","data","selectedFile","setSelectedFile","selected","window","location","pathname","url","url2","conf","headers","Authorization","get","then","response","result","singleFileChangedHandler","event","target","files","singleFileUploadHandler","preventDefault","FormData","append","name","post","accept","_boundary","status","error","code","console","log","createPropertyAsset","document","getElementById","value","catch","alert","checkProperty","address","url3","search","transferOwnership","formData","args","counter","key","keys","push","length","forEach","property","index","loc","pop","map","propertyImage","area","city","href"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport {\n  Button,\n  Col,\n  Container,\n  Form,\n  ListGroup,\n  Row,\n  Tab,\n} from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\n\nfunction Data() {\n  const [token, setToken] = useState(() =>\n    JSON.parse(localStorage.getItem(\"token\"))\n  );\n  const [pageUrl, setPageUrl] = useState(\"\");\n  const [userCnic, setUserCnic] = useState(() =>\n    localStorage.getItem(\"userCnic\")\n  );\n  const [organization, setOrganization] = useState(() =>\n    localStorage.getItem(\"orgName\")\n  );\n  const [properties, setProperties] = useState([]);\n  const data = {};\n  const [selectedFile, setSelectedFile] = useState({ selected: null });\n\n  if (!token) {\n    window.location.pathname = \"/signin\";\n  }\n\n  const url =\n    \"https://35.209.170.73:4000/channels/mychannel/chaincodes/landRecord\";\n  const url2 = url + `?args=[\"${userCnic}\"]&fcn=queryLandsByOwner`;\n\n  let conf = {\n    headers: {\n      Authorization: `Bearer ${token}`,\n      \"Content-Type\": \"application/json\",\n    },\n  };\n\n\n\n  useEffect(() => {\n    axios.get(url2, conf).then((response) => {\n      setProperties(response.data.result);\n    });\n  }, [pageUrl]);\n\n  const singleFileChangedHandler = (event) => {\n    setSelectedFile({\n      selected: event.target.files[0],\n    });\n  };\n\n  function singleFileUploadHandler(event) {\n    event.preventDefault();\n    let data = new FormData();\n    if (selectedFile.selected) {\n      data.append(\n        \"profileImage\",\n        selectedFile.selected,\n        selectedFile.selected.name\n      );\n      axios\n        .post(\"https://35.209.170.73:4000/profile-img-upload\", data, {\n          headers: {\n            accept: \"application/json\",\n            \"Accept-Language\": \"en-US,en;q=0.8\",\n            \"Content-Type\": `multipart/form-data; boundary=${data._boundary}`,\n          },\n        })\n        .then((response) => {\n          if (200 === response.status) {\n            // If file size is larger than expected.\n            if (response.data.error) {\n              if (\"LIMIT_FILE_SIZE\" === response.data.error.code) {\n                console.log(\"LIMIT\");\n              } else {\n                // If not the given file type\n                console.log(\"Response ===> \", response.data);\n              }\n            } else {\n              // Success\n\n              createPropertyAsset(event, response.data.location);\n              document.getElementById(\"address\").value = \"\";\n              document.getElementById(\"type\").value = \"\";\n              document.getElementById(\"location\").value = \"\";\n              document.getElementById(\"area\").value = \"\";\n              document.getElementById(\"city\").value = \"\";\n              document.getElementById(\"country\").value = \"\";\n              document.getElementById(\"propertyImage\").value = \"\";\n            }\n          }\n        })\n        .catch((error) => {\n          console.log(\"Error ===> \", error);\n        });\n    } else {\n      // if file not selected throw error\n      alert(\"Please upload file\");\n    }\n  }\n\n  async function checkProperty(address) {\n    const url3 = `https://35.209.170.73:4000/channels/mychannel/chaincodes/landRecord?args=[\"${address}\"]&fcn=queryLand`;\n    const response = await axios.get(url3, conf);\n    if (response.data.error) {\n      return true;\n    }\n    if (response.data.result.address.search(address) !== -1) {\n      alert(\"Address already taken. type correct address\");\n      return false;\n    }\n  }\n\n  function transferOwnership(event) {\n    event.preventDefault();\n\n    const formData = new FormData(event.target);\n    const args = [];\n    let counter = 0;\n    for (let key of formData.keys()) {\n      args.push(formData.get(key));\n    }\n    if (properties.length === 0) {\n      alert(\"you don't have any land to transfer\");\n      return;\n    }\n    properties.forEach((property, index) => {\n      if (property.address === args[0]) {\n        counter = counter + 1;\n        data[\"fcn\"] = \"changeLandOwner\";\n        data[\"chaincodeName\"] = \"landRecord\";\n        data[\"channelName\"] = \"mychannel\";\n        data[\"args\"] = args;\n        axios.post(url, data, conf).then(function (response) {\n          alert(\"Successfully transfered car asset\");\n        });\n\n        document.getElementById(\"address\").value = \"\";\n        document.getElementById(\"ownerCnic\").value = \"\";\n        return;\n      }\n    });\n    if (counter === 0) {\n      alert(\"Wrong address\");\n      return;\n    }\n  }\n\n  async function createPropertyAsset(event, loc) {\n    event.preventDefault();\n    const formData = new FormData(event.target);\n    const args = [];\n    for (let key of formData.keys()) {\n      args.push(formData.get(key));\n    }\n    if (await checkProperty(args[0])) {\n      args.pop();\n      args.push(userCnic);\n      args.push(loc);\n      data[\"fcn\"] = \"createLand\";\n      data[\"chaincodeName\"] = \"landRecord\";\n      data[\"channelName\"] = \"mychannel\";\n      data[\"args\"] = args;\n      console.log(data);\n      axios\n        .post(url, data, conf)\n        .then(alert(\"Success property asset created\"))\n        .catch((error) => {\n          alert(error);\n        });\n\n      document.getElementById(\"address\").value = \"\";\n      document.getElementById(\"location\").value = \"\";\n      document.getElementById(\"type\").value = \"\";\n      document.getElementById(\"area\").value = \"\";\n      document.getElementById(\"city\").value = \"\";\n      document.getElementById(\"country\").value = \"\";\n    }\n  }\n\n  return (\n    <Container className=\"mb-5 py-5\">\n      <Tab.Container id=\"list-group-tabs-example\" defaultActiveKey=\"#link1\">\n        <Row>\n          <Col sm={8} className=\"order-last order-sm-first py-3\">\n            <Tab.Content>\n              <Tab.Pane eventKey=\"#link1\" className=\"text-center\">\n                <h4>My Property(s)</h4>\n                <br />\n                <div className=\"container\">\n                  <div className=\"row\">\n                    {properties.map((property, index) => {\n                      return (\n                        <div key={index} className=\"col-12 col-md-6 mb-4\">\n                          <div className=\"card p-3 d-flex align-content-between flex-wrap\">\n                            <div className=\"overflow-hidden px-1 imgThumb bg-black\">\n                              <img\n                                src={property.propertyImage}\n                                className=\"card-img-top mh-100 d-block\"\n                                alt=\"...\"\n                              />\n                            </div>\n                            <div className=\"card-body text-left\">\n                              <h5 className=\"card-title text-dark font-weight-bold\">\n                                {property.location}\n                                {property.area} {property.city}\n                              </h5>\n\n                              <Link\n                                className=\"btn bg-theme border-theme button-hover\"\n                                to={{\n                                  pathname: \"/property\",\n                                  data: property.address,\n                                }}\n                              >\n                                View\n                              </Link>\n                            </div>\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </div>\n              </Tab.Pane>\n              <Tab.Pane eventKey=\"#link2\" className=\"text-center\">\n                <h4>Asset Creation</h4>\n                <Form\n                  className=\"text-left addForm py-4 mb-3\"\n                  onSubmit={singleFileUploadHandler}\n                >\n                  <Form.Group>\n                    <Form.Label>Address *</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      placeholder=\"Enter Your Address Here\"\n                      required\n                      name=\"address\"\n                      id=\"address\"\n                    />\n                  </Form.Group>\n\n                  <Form.Group>\n                    <Form.Label>Location *</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      placeholder=\"Enter Your Property Location\"\n                      required\n                      name=\"location\"\n                      id=\"location\"\n                    />\n                  </Form.Group>\n                  <Form.Group>\n                    <Form.Label>Type *</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      placeholder=\"Enter Your Property Type\"\n                      required\n                      name=\"type\"\n                      id=\"type\"\n                    />\n                  </Form.Group>\n\n                  <Form.Group>\n                    <Form.Label>Area *</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      placeholder=\"Enter Your Property Area in Yards\"\n                      required\n                      name=\"area\"\n                      id=\"area\"\n                    />\n                  </Form.Group>\n                  <Form.Group>\n                    <Form.Label>City *</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      placeholder=\"Enter City of your property\"\n                      required\n                      name=\"city\"\n                      id=\"city\"\n                    />\n                  </Form.Group>\n                  <Form.Group>\n                    <Form.Label>Country *</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      placeholder=\"Enter Country of Your Property\"\n                      required\n                      name=\"country\"\n                      id=\"country\"\n                    />\n                  </Form.Group>\n                  <Form.Group>\n                    <Form.Label>Image *</Form.Label>\n                    <Form.Control\n                      onChange={singleFileChangedHandler}\n                      type=\"file\"\n                      id=\"propertyImage\"\n                      placeholder=\"Upload Image of Your Property\"\n                      required\n                      name=\"propertyImage\"\n                    />\n                  </Form.Group>\n                  <Button\n                    variant=\"primary\"\n                    type=\"submit\"\n                    className=\"w-100 mt-2 bg-theme border-theme button-hover\"\n                    data-toggle=\"modal\"\n                    id=\"submit\"\n                  >\n                    Submit\n                  </Button>\n                </Form>\n              </Tab.Pane>\n              <Tab.Pane eventKey=\"#link3\" className=\"text-center\">\n                <h4>Transfer Ownership</h4>\n                <Form\n                  className=\"text-left addForm py-4 mb-3\"\n                  onSubmit={transferOwnership}\n                >\n                  <Form.Group>\n                    <Form.Label>Address *</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      id=\"address\"\n                      placeholder=\"Enter Your Address Here\"\n                      required\n                      name=\"address\"\n                    />\n                  </Form.Group>\n\n                  \n                  <Form.Group>\n                    <Form.Label>CNIC *</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      id=\"ownerCnic\"\n                      placeholder=\"Enter Owner's Cnic Without Dashes\"\n                      required\n                      name=\"ownerCnic\"\n                      minLength=\"13\"\n                      maxLength=\"13\"\n                    />\n                  </Form.Group>\n                  <Button\n                    variant=\"primary\"\n                    type=\"submit\"\n                    className=\"w-100 mt-2 bg-theme border-theme button-hover\"\n                    data-toggle=\"modal\"\n                  >\n                    Submit\n                  </Button>\n                </Form>\n              </Tab.Pane>\n            </Tab.Content>\n          </Col>\n          <Col sm={4}>\n            <h4>Hello {userCnic} </h4>\n            <h6>\n              Organization:{\" \"}\n              {organization === \"Org1\" ? \"Development Authority\" : \"Land Owner\"}{\" \"}\n            </h6>\n            <br />\n            <ListGroup>\n              <ListGroup.Item\n                action\n                href=\"#link1\"\n                onClick={() => setPageUrl(window.location.href)}\n              >\n                My Property(s)\n              </ListGroup.Item>\n              {organization === \"Org1\" ? (\n                <>\n                  <ListGroup.Item action href=\"#link2\">\n                    Create Property Record\n                  </ListGroup.Item>\n                  <ListGroup.Item action href=\"#link3\">\n                    Transfer Ownership\n                  </ListGroup.Item>\n                </>\n              ) : (\n                <>\n                  <ListGroup.Item action href=\"#link3\">\n                    Transfer Ownership\n                  </ListGroup.Item>\n                </>\n              )}\n            </ListGroup>\n          </Col>\n        </Row>\n      </Tab.Container>\n    </Container>\n  );\n}\n\nexport default Data;\n"]},"metadata":{},"sourceType":"module"}