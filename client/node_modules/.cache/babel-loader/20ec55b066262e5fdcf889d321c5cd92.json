{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/asadullah/LandProject/src/components/Signin/Data.js\";\nimport React from \"react\";\nimport axios from \"axios\";\n\nfunction Data() {\n  let cert;\n  const url = \"http://35.209.170.73:4000/users/login\";\n  let conf = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n\n  const showFile = async e => {\n    e.preventDefault();\n    const reader = new FileReader();\n\n    reader.onload = async e => {\n      cert = e.target.result;\n    };\n\n    reader.readAsText(e.target.files[0]);\n  };\n\n  const login = () => {\n    let userCnic = document.getElementById(\"file1\").value.slice(12, -7);\n    let orgName = document.getElementById(\"file1\").value.slice(-7, -3);\n    let data = {\n      userCnic,\n      type,\n      certificate: cert\n    };\n    axios.post(url, data, conf).then(response => {\n      if (response.data.success) {\n        localStorage.setItem(\"token\", JSON.stringify(response.data.message.token));\n        localStorage.setItem(\"userCnic\", ownerCnic);\n        localStorage.setItem(\"orgName\", type);\n        window.location.pathname = \"/profile/\" + ownerCnic;\n      } else if (response.data.success === false) {\n        alert(\"Wrong Certificate\");\n      }\n    }).catch(err => {\n      alert(err);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row row-content text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 my-2 d-flex justify-content-center px-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            maxWidth: \"400px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Identity Certificate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"To signin into the network you have to upload the platform identity certificate which has been issued to you during your registration.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-3 py-2 mb-3 rounded text-white bg-theme-secondary\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              onChange: e => showFile(e),\n              type: \"file\",\n              id: \"file1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: login,\n            className: \"btn button-hover bg-theme text-white\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n\n_c = Data;\nexport default Data;\n\nvar _c;\n\n$RefreshReg$(_c, \"Data\");","map":{"version":3,"sources":["/home/asadullah/LandProject/src/components/Signin/Data.js"],"names":["React","axios","Data","cert","url","conf","headers","showFile","e","preventDefault","reader","FileReader","onload","target","result","readAsText","files","login","userCnic","document","getElementById","value","slice","orgName","data","type","certificate","post","then","response","success","localStorage","setItem","JSON","stringify","message","token","ownerCnic","window","location","pathname","alert","catch","err","maxWidth"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nfunction Data() {\n  let cert;\n  const url = \"http://35.209.170.73:4000/users/login\";\n  let conf = {\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  };\n  const showFile = async (e) => {\n    e.preventDefault();\n    const reader = new FileReader();\n    reader.onload = async (e) => {\n      cert = e.target.result;\n    };\n    reader.readAsText(e.target.files[0]);\n  };\n  const login = () => {\n    let userCnic = document.getElementById(\"file1\").value.slice(12, -7);\n    let orgName = document.getElementById(\"file1\").value.slice(-7, -3);\n    let data = {\n      userCnic,\n      type,\n      certificate: cert,\n    };\n    axios\n      .post(url, data, conf)\n      .then((response) => {\n        if (response.data.success) {\n          localStorage.setItem(\n            \"token\",\n            JSON.stringify(response.data.message.token)\n          );\n          localStorage.setItem(\"userCnic\", ownerCnic);\n          localStorage.setItem(\"orgName\", type);\n          window.location.pathname = \"/profile/\" + ownerCnic;\n        } else if (response.data.success === false) {\n          alert(\"Wrong Certificate\");\n        }\n      })\n      .catch((err) => {\n        alert(err);\n      });\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"row row-content text-center\">\n        <div className=\"col-12 my-2 d-flex justify-content-center px-3\">\n          <div style={{ maxWidth: \"400px\" }}>\n            <h2>Identity Certificate</h2>\n            <p>\n              To signin into the network you have to upload the platform\n              identity certificate which has been issued to you during your\n              registration.\n            </p>\n            <div className=\"px-3 py-2 mb-3 rounded text-white bg-theme-secondary\">\n              <input onChange={(e) => showFile(e)} type=\"file\" id=\"file1\" />\n            </div>\n            <button\n              onClick={login}\n              className=\"btn button-hover bg-theme text-white\"\n            >\n              Login\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Data;\n"]},"metadata":{},"sourceType":"module"}